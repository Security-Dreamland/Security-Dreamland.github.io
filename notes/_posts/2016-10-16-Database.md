---
layout: post

category: note

title: 《数据库系统概论》学习笔记

subtitle: 数据库

excerpt:  本学期学习了我一直很想了解的数据库相关知识，这里开一篇博文用于进行相关学习笔记的记录，便于后期学习总结。

first_time: 2016.10.16 12:31:00

time: 2016.10.16 13:03:09

tags:
- DataBase

---

# 《数据库系统概论》学习笔记 

------

## 第一章. 绪论

###  1. 数据库 4个基本概念

1. 数据：数据是数据库中存储的基本对象，也定义为描述事物的符号记录。此外，数据的含义称为数据的语义，数据与其语义是不可分的。
2. 数据库：数据库是长期存储在计算机内、有组织的、可共享的大量数据的集合。数据库中的数据按一定的数据模型组织、描述和储存，具有较小的冗余度、较高的数据独立性和易扩展性，并可为各种用户共享。 数据库数据具有永久存储、有组织和可共享三个基本特点。
3. 数据库管理系统：用于管理数据库，主要功能：数据定义功能、数据组织、存储和管理、数据操纵、数据库的事务管理和运行管理、数据库的建立和维护功能等等。
4. 数据系统：数据库系统是由数据库、数据库管理系统（及其应用开发工具）、应用程序和数据库管理员组成的存储、管理、处理和维护数据的系统。


### 2. 数据库管理技术的产生和发展 

1. 人工管理阶段
2. 文件系统阶段 
3. 数据库系统阶段

具体比较参考书p7

### 3.数据库系统的特点
1. 数据结构化：这事数据库的主要特征之一，也是数据库系统和文件系统的本质区别
2. 数据的共享性高、冗余度低且易扩充
3. 数据独立性高：包括物理独立性和逻辑独立性，物理独立性是指用户的应用程序和数据库中数据的物理存储是相互独立的。逻辑独立性是指用户的应用程序和数据库的逻辑结构是相互独立的          
4. 数据由数据库管理系统统一管理和控制，这能解决共享导致的安全隐患，它能提供数据的安全性保护，数据的完整性检查，兵法控制，数据库恢复

综上，数据库是长期存储在计算机内有组织、大量、共享的数据集合。它可以供各种用户共享，具有最小冗余度和较高的数据独立性。数据库管理系统在数据库建立、运用和维护时对数据库进行统一控制，以保证数据的完整性和安全性，并在多用户同时使用数据库时进行兵法控制，在发生故障后对数据库进行恢复。

### 4.数据模型
数据模型是对现实世界数据特征的抽象，用来描述数据、组织数据和对数据进行操作的。数据模型是数据库系统的核心和基础。

#### 分类
1. 概念模型：它按用户的观点来对数据和信息建模，主要用于数据库设计
2. 逻辑模型和物理模型：逻辑模型主要包括层次模型、网状模型、关系模型、面向对象数据模型和对象关系数据模型、半结构化模型等。物理模型是对数据最底层的抽象，描述数据在系统内部的表示方式和存取方法。

#### 概念模型

1. 实体：客观存在并可互相区别的事物称为实体。（具体的一个事物，例如一个学生）
2. 属性：实体所具有的某一特性称为属性。（一个实体可以由若干个属性来刻画，例如学生实体可以由学号、性别、姓名等来刻画）
3. 码：唯一标识实体的属性集称为码。（学号可以作为学生实体的码，来唯一区分）
4. 实体型：用实体名及其属性名集合来抽象和刻画同类实体，称为实体型。例如（学生（学号，姓名，性别，出生年月）就是一个实体型
5. 实体集：同一类型实体的集合称为实体集（例如全体学生就是一个实体集）
6. 联系：实体之间的联系通常指不同实体集之间的联系，实体之间的联系有一对一、一对多和多对多等多种类型

概念模型一般采用实体-联系方法，也就是E-R图来描述

#### 数据模型
数据模型一般由数据结构、数据操作和数据完整性约束条件三部分组成。

1. 数据结构：描述数据库的组成对象以及对象之间的联系
2. 数据操作：是指对数据库中各种对象（型）的实例允许执行的操作的集合，包括操作及有关的操作规则。
3. 数据的完整性约束条件：数据的完整性约束是一组完整性规则。完整性规则是给定的数据模型中数据及其联系所具有的制约和遗存规则，用以限定符合数据模型的数据库状态以及状态的变化，以保证数据及的正确、有效和相容。



##### 常见的数据模型

###### 1. 层次模型
通俗的讲层次模型就是一颗树，这棵树需要满足以下两个条件：

1. 有且只有一个节点没有双亲节点，这个节点称为根节点
2. 根以外的其他节点有且只有一个双亲节点。
   优缺点：数据结构比较简单清晰，查询效率高，提供了良好的完整性支持，但是并不能适用于现实世界的联系，有时能使用，但是很笨拙。
#####2. 网状模型
典型代表：DBTG系统，亦称为CODASYL系统。
满足条件：

1. 允许一个以上的结点无双亲
2. 一个节点可以有多于一个的双亲
   较层次模型更宽松的规则，更具有普遍性。
   优点：能够更为直接描述现实世界，良好的性能，存取效率较高。
   缺点：结构复杂，网状模型的DDL、DML复杂，并且需嵌入某一种高级语言中。有一定的应用程序负担

##### 3. 关系模型
建立在严格的数学概念的基础上。

1. 关系：一个关系对应通常说的一张表。
2. 元组：一行
3. 属性：一列
4. 码：也称为码键，表中的某个属性组，唯一确定一个元组。
5. 域：域是一组具有相同数据类型的值的集合。
6. 分量：元组中的一个属性值。
7. 关系模式：对关系的描述，一般表示为 关系名（属性1，属性2，。。。。属性n）


关系模型要求关系必须是规范化的，关系的每一个分量必须是一个不可分的数据项。

优缺点：建立在严格的数学概念上，概念单一，数据结构简单、清晰，用户易懂易用，开发方便。

### 3. 数据库系统的结构
1. “型”和“值”的概念，型是指对某一类数据的结构和数学的说明，值时型的一个具体赋值。
2. 模式是数据库中全体数据的逻辑结构和特征描述，模式的一个具体值称为模式的一个实例。模式是相对稳定的，而实例是相对变动的。
3. 数据库系统的三级模式结构：外模式、模式和内模式三级构成。
    - 模式：也称逻辑模式，是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图。
    - 外模式也称子模式或用户模式，它是数据库用户能够看见和使用的局部数据的逻辑结构和特征的描述，是数据库用户的数据视图，是与某一应用有关的数据的逻辑表示。
    - 内模式也称存储模式，一个数据库只有一个内模式。它是数据物理结构和存储方式的描述，是数据在数据库内部的组织方式。

4. 数据库的二级映象功能
    - 外模式／模式映象：当模式改变时，由数据库管理员对各个外模式／模式的映象作相应改变，可以使外模式保持不变。应用程序是依据数据的外模式编写的，从而应用程序不必修改，保证了数据与程序的逻辑独立性，简称数据的逻辑独立性
    - 模式／内模式映象：当数据库的存储结构改变时，由数据库管理员对模式／内模式映象作相应改变，可以使模式保持不变，从而应用程序也不必改变，保证了数据与程序的物理独立性，简称数据的物理独立性。  




----

## 第二章. 关系数据库

关系模型由关系数据结构、关系操作集合和关系完整性约束三部分组成。

### 1. 关系（关系数据库的数据结构）

1. 域：域是一组具有相同数据类型的值的集合。

2. 笛卡尔积：

   > 在数学中，两个[集合](http://baike.baidu.com/view/15216.htm)*X*和*Y*的**笛卡尓积**（Cartesian product），又称**直积**，表示为*X* × *Y*，第一个对象是*X*的成员而第二个对象是*Y*的所有可能[有序对](http://baike.baidu.com/view/6055238.htm)的其中一**个成员**。

   假设集合A={a, b}，集合B={0, 1, 2}，则两个集合的笛卡尔积为{(a, 0), (a, 1), (a, 2), (b, 0), (b, 1), (b, 2)}。

   一个域允许的不同取值个数称为这个域的基数。

   关系是笛卡儿积的有限子集。

3. 若关系中的某一属性组的值能唯一地标识一个元组，而其子集不能，则称该属性组为候选码。

4. 若一个关系有多个候选码，则选定其中一个为主码。

5. 候选码的诸属性称为主属性。不包含在任何候选码中的属性称为非主属性或非码属性。

6. 在最极端的情况下，关系模式的所有属性是这个关系模式的候选码，称为全码。

7. 关系可以有三种类型：基本关系（基本表或基表）、查询表和视图表。基本表是实际存在的表，它是实际存储数据的逻辑表示；查询表示查询结果对应的表；视图表是由基本表或其他视图表导出的表，是虚表，不对应实际存储的数据。

8. 在对关系进行限定和扩充下（为了适应数据库要求）：关系需要具有以下几个性质

   1. 列是同质的

   2. 不同的列可出自同一个域

   3. 列的顺序无所谓

   4. 任意两个元组的候选码不能取相同的值

   5. 行的顺序无所谓

   6. 分量必须取原子值

      必须保证表中不能再有表

9. 关系的描述称为关系模式（型），关系是关系模式在某一时刻的状态或内容（值）。关系模式是静态的、稳定的，而关系是动态的、随时间不断变化的。

10. 关系数据库的型也称为关系数据库模式，是对关系数据库的描述。关系数据库的值是这些关系模式在某一时刻对应的关系的集合，通常就称为关系数据库。

### 2. 关系操作

关系操作的对象和结果都是集合。基本操作：选择、投影、并、差、笛卡尔积。分类：关系代数、关系演算、介于两者之间（SQL）。



### 3. 关系的完整性

1. 实体完整性：若属性（指一个或一组属性）A是基本关系R的主属性，则A不能取空值。所谓空值就是“不知道”或“不存在”或”无意义“的值。
2. 参照完整性：设F是基本关系R的一个或一组属性，但不是关系R的码，Ks是基本关系S的主码。如果F与Ks相对应，则称F是R的外码，并称基本关系R为参照关系，基本关系S为被参照关系或目标关系。参照完整性规则：若属性（或属性组）F是基本关系R的外码，它与基本关系S的主码Ks相对应，则对于R中每个元组在F上的值必须：或者取空值，或者等于S中某个元组的主码值。
3. 用户定义的完整性：就是针对某一具体关系数据库的约束条件，它反映某一具体应用所涉及的数据必须满足的语义要求。



其中，1，2是关系模型必须满足的完整性约束，被称作关系的两个不变性，应用由关系系统自动支持。



### 4. 关系代数

关系代数是一种抽象的查询语言，它用对关系的运算来表达查询。

1. 集合运算：并、交、差、笛卡尔积
2. 关系运算：选择、投影、连接、除运算等

具体请参照书本，看例子。p50-p56



### 5. 习题

1 ．试述关系模型的三个组成部分。
答：关系模型由关系数据结构、关系操作集合和关系完整性约束三部分组成。

 

2 ．试述关系数据语言的特点和分类。

答：关系数据语言可以分为三类：

关系代数语言。

关系演算语言：元组关系演算语言和域关系演算语言。

SQL：具有关系代数和关系演算双重特点的语言。

这些关系数据语言的共同特点是，语言具有完备的表达能力，是非过程化的集合操作语言，功能强，能够嵌入高级语言中使用。



5 . 述关系模型的完整性规则。在参照完整性中，为什么外部码属性的值也可以为空？什么情况下才可以为空？

答：实体完整性规则是指若属性A是基本关系R的主属性，则属性A不能取空值。

若属性(或属性组)F是基本关系R的外码，它与基本关系S的主码Ks相对应(基本关系R和S不一定是不同的关系)，则对于R中每个元组在F上的值必须为：或者取空值(F的每个属性值均为空值)；或者等于S中某个元组的主码值。即属性F本身不是主属性，则可以取空值，否则不能取空值。

6．设有一个SPJ数据库，包括S，P，J，SPJ四个关系模式：

1）求供应工程J1零件的供应商号码SNO：

πSno(σJno=‘J1’（SPJ）)

2）求供应工程J1零件P1的供应商号码SNO：

πSno(σJno=‘J1’∧Pno=‘P1‘(SPJ))

3）求供应工程J1零件为红色的供应商号码SNO：

πSno(πSno,,Pno（σJno=‘J1‘ (SPJ))∞πPno（σCOLOR=’红‘ （P）))

4）求没有使用天津供应商生产的红色零件的工程号JNO：

πJno(SPJ)- πJNO（σcity=‘天津’∧Color=‘红‘ （S∞SPJ∞P）

5）求至少用了供应商S1所供应的全部零件的工程号JNO：

πJno，Pno(SPJ)÷ πPno（σSno=‘S1‘ （SPJ））

7. 试述等值连接与自然连接的区别和联系。

答：连接运算符是“=”的连接运算称为等值连接。它是从关系R与S的广义笛卡尔积中选取A，B属性值相等的那些元组

自然连接是一种特殊的等值连接，它要求两个关系中进行比较的分量必须是相同的属性组，并且在结果中把重复的属性列去掉。



8．关系代数的基本运算有哪些 ? 如何用这些基本运算来表示其他运算? 

答：并、差、笛卡尔积、投影和选择5种运算为基本的运算。其他3种运算，即交、连接和除，均可以用这5种基本运算来表达。





-----

